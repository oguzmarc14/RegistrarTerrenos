---
import { createClient } from "@supabase/supabase-js";
import CardMostrarTerreno from "../ui/CardMostrarTerreno.astro";

const supabase = createClient(
  import.meta.env.PUBLIC_SUPABASE_URL,
  import.meta.env.PUBLIC_SUPABASE_KEY
);

const { data: terrenos, error } = await supabase
  .from("Terrenos")
  .select("*")
  .order("fecha", { ascending: false });
---

<h2 class="text-4xl md:text-5xl text-center mb-10 text-gray-100 font-serif mt-12">
  Terrenos en venta
</h2>

{error && <p class="text-red-500 text-center">Error al cargar terrenos</p>}

<div
  class="grid gap-10 sm:gap-12 md:gap-14 
         grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 
         max-w-9xl mx-auto px-4 md:px-8"
>
  {
    terrenos?.map((terreno) => (
      <CardMostrarTerreno
        titulo={terreno.titulo}
        descripcion={terreno.descripcion}
        precio={terreno.precio}
        imagenes={terreno.imagenes}
        medidas={terreno.medidas}
        ubicacion={terreno.ubicacion}
        fecha={terreno.fecha}
        textBoton="Me interesa"
        hrefBoton="#"
      />
    ))
  }
</div>
